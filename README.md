# Project Architecture Analysis: Domain-Driven Design (DDD)

এই প্রজেক্টটি **Domain-Driven Design (DDD)** প্যাটার্ন অনুসরণ করে তৈরি করা হয়েছে। এখানে `PromptSetting` মডিউলটি বিশ্লেষণ করে আর্কিটেকচারের বিভিন্ন অংশের কাজ ব্যাখ্যা করা হলো।

## ১. মূল ধারণা (Core Concept)

সাধারণ Laravel প্রজেক্টে আমরা সাধারণত `Model` এর ভেতরেই সব লজিক এবং ডাটাবেস অপারেশন রাখি। কিন্তু এই আর্কিটেকচারে **Business Logic (Entity)** এবং **Database Logic (Eloquent)** কে সম্পূর্ণ আলাদা করা হয়েছে।

- **Entity:** পিওর PHP ক্লাস যা বিজনেস রুলস এবং লজিক ধারণ করে।
- **Eloquent:** শুধুমাত্র ডাটাবেস টেবিলের সাথে কানেকশন এবং কুয়েরি করার জন্য ব্যবহৃত হয়।

---

## ২. উপাদানসমূহ ও তাদের কাজ (Components & Responsibilities)

নিচে `PromptSetting` মডিউলের বিভিন্ন ফোল্ডার এবং ফাইলের দায়িত্ব ব্যাখ্যা করা হলো:

### ক. Value Objects (ভ্যালু অবজেক্টস)
**Location:** `PromptSetting/ValueObjects/`
- **উদাহরণ:** `PromptSettingName.php`, `PromptSettingPrompt.php`
- **কাজ:** সাধারণ স্ট্রিং বা ইন্টিজার ব্যবহার না করে অবজেক্ট ব্যবহার করা। এটি ডাটার ভ্যালিডেশন এবং ফরম্যাট নিশ্চিত করে।
- **কেন ব্যবহার করবেন:** যদি ডাটার নিয়ম (যেমন: নামের দৈর্ঘ্য) পরিবর্তন হয়, শুধু এই একটি ক্লাসে পরিবর্তন করলেই পুরো সিস্টেমে তা আপডেট হয়ে যাবে।

### খ. Entity (এনটিটি)
**Location:** `PromptSetting.php`
- **কাজ:** এটি এই মডিউলের প্রধান ক্লাস বা "Boss"। এটি সমস্ত Value Object গুলোকে ধারণ করে এবং মূল বিজনেস লজিক পরিচালনা করে।
- **বৈশিষ্ট্য:**
    - এটি সরাসরি ডাটাবেসের সাথে কথা বলে না।
    - এতে `id` থাকে (Identity)।
    - ডাটা সেভ করার আগে লজিক্যাল চেক (যেমন: `preSave()`) করে।

### গ. Eloquent Model (ইনফ্রাস্ট্রাকচার)
**Location:** `PromptSetting/Eloquents/PromptSettingEloquent.php`
- **কাজ:** এটি লারাভেলের সাধারণ মডেল, যা শুধুমাত্র `prompt_settings` টেবিলের সাথে রিড/রাইট অপারেশন চালায়।
- **রূপান্তর:** এতে `toEntity()` মেথড থাকে যা ডাটাবেস থেকে পাওয়া ডাটাকে **Domain Entity** তে রূপান্তর করে।

### ঘ. Repository (রিপোজিটরি)
**Location:** `PromptSetting/Repositories/PromptSettingRepository.php`
- **কাজ:** এটি **Entity** এবং **Eloquent** এর মধ্যে সেতু (Bridge) হিসেবে কাজ করে।
- **প্রক্রিয়া:** ডোমেইন লেয়ার ডাটাবেস সম্পর্কে জানে না। সে রিপোজিটরির কাছে ডাটা চায়। রিপোজিটরি ডাটাবেস থেকে Eloquent মডেল এনে সেটিকে Entity তে কনভার্ট করে ডোমেইনকে দেয়।

### ঙ. Factory (ফ্যাক্টরি)
**Location:** `PromptSetting/Factories/PromptSettingFactory.php`
- **কাজ:** ইউজার ইনপুট (`Params`) থেকে ভ্যালিডেশনসহ একটি জটিল **Entity** তৈরি করা।
- **সুবিধা:** অবজেক্ট তৈরির জটিল লজিক কন্ট্রোলার থেকে সরিয়ে এখানে রাখা হয়।

---

## ৩. ডাটা ফ্লো (Data Flow)

যখন একটি নতুন `PromptSetting` সেভ করা হয়, তখন ডাটা প্রবাহ নিচের মতো হয়:

1.  **Controller:** ইউজারের ইনপুট রিসিভ করে।
2.  **Factory:** `PromptSettingFactory` কল করে ইনপুট ভ্যালিডেট করে এবং একটি **Entity** তৈরি করে।
3.  **Repository:** কন্ট্রোলার সেই Entity-কে `PromptSettingRepository::save($entity)` এর মাধ্যমে পাঠায়।
4.  **Eloquent:** রিপোজিটরি সেই Entity-কে `Eloquent` মডেলে কনভার্ট করে এবং ডাটাবেসে `save()` করে।

---

## ৪. এই আর্কিটেকচারের সুবিধা (Benefits)

1.  **Separation of Concerns:** বিজনেস লজিক এবং ডাটাবেস লজিক আলাদা থাকায় কোড মেইনটেইন করা সহজ।
2.  **Type Safety:** `Strict Types` ব্যবহারের ফলে ভুল ডাটা সিস্টেমে প্রবেশ করতে পারে না।
3.  **Testing:** ডাটাবেস কানেকশন ছাড়াই বিজনেস লজিক টেস্ট করা সম্ভব হয়।
4.  **Scalability:** বড় এবং জটিল প্রজেক্টের ক্ষেত্রে কোড অগোছালো হওয়া থেকে রক্ষা করে।
